<?xml version="1.0" encoding="UTF-8"?><rss version="2.0"
	xmlns:content="http://purl.org/rss/1.0/modules/content/"
	xmlns:wfw="http://wellformedweb.org/CommentAPI/"
	xmlns:dc="http://purl.org/dc/elements/1.1/"
	xmlns:atom="http://www.w3.org/2005/Atom"
	xmlns:sy="http://purl.org/rss/1.0/modules/syndication/"
	xmlns:slash="http://purl.org/rss/1.0/modules/slash/"

	xmlns:georss="http://www.georss.org/georss"
	xmlns:geo="http://www.w3.org/2003/01/geo/wgs84_pos#"
	>

<channel>
	<title>Simone Bizzotto &#8211; dbatools</title>
	<atom:link href="https://dbatools.io/author/niphlod/feed/" rel="self" type="application/rss+xml" />
	<link>https://dbatools.io/</link>
	<description>the community&#039;s sql powershell module</description>
	<lastBuildDate>Fri, 13 Sep 2019 08:26:54 +0000</lastBuildDate>
	<language>en-US</language>
	<sy:updatePeriod>
	hourly	</sy:updatePeriod>
	<sy:updateFrequency>
	1	</sy:updateFrequency>
	<generator>https://wordpress.org/?v=5.3.4</generator>

<image>
	<url>https://dbatools.io/wp-content/uploads/2016/05/dbatools.png?fit=32%2C32&#038;ssl=1</url>
	<title>Simone Bizzotto &#8211; dbatools</title>
	<link>https://dbatools.io/</link>
	<width>32</width>
	<height>32</height>
</image>
<site xmlns="com-wordpress:feed-additions:1">111052036</site>	<item>
		<title>the path to 1.0</title>
		<link>https://dbatools.io/the-path-to-1-0/</link>
				<comments>https://dbatools.io/the-path-to-1-0/#comments</comments>
				<pubDate>Tue, 16 Jan 2018 15:08:50 +0000</pubDate>
		<dc:creator><![CDATA[Simone Bizzotto]]></dc:creator>
				<category><![CDATA[articles]]></category>

		<guid isPermaLink="false">https://dbatools.io/?p=6942</guid>
				<description><![CDATA[We have now reached more than 370 public functions and nearly 1000 unit and integration tests, all thanks to over 100 community contributors! As you may have noticed, we release ...]]></description>
								<content:encoded><![CDATA[<p>We have now reached more than 370 public functions and nearly 1000 unit and integration tests, all thanks to over 100 community contributors!</p>
<p>As you may have noticed, we release a 0.9.x update with bug fixes and new features almost daily, so why haven&#8217;t we released 1.0 yet?</p>
<h2>Shifting from ‚Äúa bag of functions‚Äù to a proper module</h2>
<p>We love new functionality, of course, but we must take a step back from new development and consolidate what we have in a properly usable module.</p>
<p>Most of the contributors are damn good SQL Server Pros, a few are damn good PowerShell programmers, with the majority of ‚Äúcasual‚Äù developers being able to successfully publish a new function in less than a week time. But what we aren&#8217;t so good at is advertising our needs. We recently updated our¬†<a href="https://github.com/dataplat/dbatools/blob/master/CONTRIBUTING.md">contributing.md</a>¬†to be more on par with the latest months of developing. Stay tuned there, as the few TODOs left are coming, but the path is mostly set.</p>
<h2>We need your help</h2>
<p>We&#8217;re looking for contributors to help us finally reach version 1.0. Currently, we are on par with Gmail&#8217;s beta schedule: a whopping 4 years. But, we&#8217;re almost there and need your help finalizing our changes. If you&#8217;re interested in helping us bring 1.0 alive, we identified four areas with 5 primary contacts on the <a href="/slack">SQL Server Community Slack</a>:</p>
<ul>
<li>Standardize param names (@wsmelton)</li>
<li>Create tests for existing functions (@cl and @niphlod)</li>
<li>Review existing function documentation (@alevyinroc or @gbargsley)</li>
<li>Prepare for 1.0 with ‚Äúcode style‚Äù (Bill of Health, more on that later)</li>
</ul>
<p>As you can see, a few of us are the main reference (on GitHub and Slack, mostly) for each area.</p>
<h2>Bill of Health</h2>
<p>As dbatools is full of sooo many features, it‚Äôs hard to tackle everything in one sweep. That‚Äôs why we made the <a href="https://sqlcollaborative.github.io/boh">Bill of Health</a> available. That‚Äôs for you, and us, to track progress towards 1.0. It includes every single activity that will bring us closer to 1.0.</p>
<p>Data will be refreshed once or twice a week (you can see the trend on top with the details), giving everybody a good understanding on what‚Äôs the pace of development. For details on each column, click on the Legend details, you‚Äôll be able to see what they mean.</p>
<p>Basically, we gave each function a scorecard, composed by checks that need to be tackled before 1.0.</p>
<h4>Becoming a core developer</h4>
<p>Some of the checks are ‚Äúreserved for core-devs‚Äù, but that doesn‚Äôt mean you shouldn‚Äôt tackle those, it‚Äôs just you need to read on how we want the code to look like (we&#8217;ll eventually group everything in a more consolidated guide, ranging from the simpler to the &#8220;most complex&#8221;):</p>
<ul>
<li><a href="https://github.com/dataplat/dbatools/wiki/Do-And-Do-Not">do and do not</a></li>
<li><a href="https://github.com/dataplat/dbatools/wiki/Style-Guide">Style Guide</a></li>
<li><a href="https://github.com/dataplat/dbatools/wiki/Implementing-the-messaging-system">The Messaging System</a></li>
<li><a href="https://github.com/dataplat/dbatools-progressmanagement/blob/master/dbatools%201.0/Requirements/manually%20signing%20off.md">Sign-offs</a></li>
</ul>
<p>It¬†<em>may</em>¬†scare PowerShell newbies, but trust us, to get the gist of it and be a successful ‚Äúcore-dev‚Äù, all you need is one week of coding. Most of us learned from Slack and Pull Request Code reviews. Sqlcollaborative is a wonderful place to learn coding in PowerShell! Checks for core-devs, despite being numerous, are a minority of the total.</p>
<h2>Getting started</h2>
<p>The most important things you can fix even without being a skilled developer: ScriptAnalyzer and Coverage. <a href="https://github.com/PowerShell/PSScriptAnalyzer">ScriptAnalyzer</a>¬†checks are the de-facto standard for any Powershell module and some are really, really easy to fix.</p>
<p>Coverage is a ‚Äúhigher level‚Äù metric: it tells you how much code is tested. It builds up on having tests written. We can&#8217;t (and won&#8217;t) stress enough on this point: if it‚Äôs tested, tests describe the way the function behaves, so <strong>the more coverage a function has, the more stable it is</strong>. This means you can build up your scripts¬† being sure there won‚Äôt be regressions (i.e. the code that ‚Äúworked before‚Äù continues to work as expected).</p>
<p>Having a strong suite of tests also help the casual developer contributing code, being sure it doesn&#8217;t break existing functionality. It&#8217;s only a recommendation, but I feel like most of the &#8220;devs&#8221; should spend most of their time writing tests, because it&#8217;s the single best wealth indicator for any module.</p>
<p>For dbatools in particular: if you factor all the things dbatools supports (think PS versions <em>times</em> SQL releases <em>times</em> editions <em>times</em> Azure/cloud envs¬†<em>times</em> x86/x64¬†<em>times</em> remote/local <em>times </em>functions¬†<em>times &#8230; </em>).</p>
<h4>We&#8217;ve made it easy</h4>
<p>You can copy and paste from¬†<a href="https://github.com/dataplat/dbatools-templates/tree/master/tests">our templates</a>¬†for a starting point, or dive right in to an existing tests.<br />
<a href="https://dbatools.io/improving-tests/">Improving existing tests</a>¬†is an easy first step to ‚Äúdip your toes‚Äù into coverage.</p>
<h2>Want to help?</h2>
<p>Right now there are more than 500 tasks ready to be tackled by everyone and more than 1300 for intermediate developers. To make sure everyone doesn‚Äôt jump on the same activity, you‚Äôre invited to see if there‚Äôs an <a href="/issues">issue</a> opened on GitHub by someone else. If nothing pops up, open an ‚Äúissue‚Äù , stating that you want to work the issue.</p>
<p>You can then <a href="https://dbatools.io/firstpull">issue a PR</a>, there will be a swift review of the changes, and the code will be committed. A few hundred PR&#8217;s later (hopefully it‚Äôll take just three or four by yourself), 1.0 will be shipped. And just wait to see what we have in mind for 2.0!</p>
<p>Got any questions? Hit me up on Slack. I&#8217;m @niphlod.</p>
<p>&nbsp;</p>
<p>Ciao!<br />
Simone <img src="https://s.w.org/images/core/emoji/12.0.0-1/72x72/1f1ee-1f1f9.png" alt="üáÆüáπ" class="wp-smiley" style="height: 1em; max-height: 1em;" /></p>
]]></content:encoded>
							<wfw:commentRss>https://dbatools.io/the-path-to-1-0/feed/</wfw:commentRss>
		<slash:comments>1</slash:comments>
						<post-id xmlns="com-wordpress:feed-additions:1">6942</post-id>	</item>
		<item>
		<title>improving tests: code coverage usecase</title>
		<link>https://dbatools.io/improving-tests/</link>
				<comments>https://dbatools.io/improving-tests/#respond</comments>
				<pubDate>Fri, 17 Nov 2017 13:01:57 +0000</pubDate>
		<dc:creator><![CDATA[Simone Bizzotto]]></dc:creator>
				<category><![CDATA[articles]]></category>
		<category><![CDATA[party]]></category>

		<guid isPermaLink="false">https://dbatools.io/?p=6559</guid>
				<description><![CDATA[A recent addition to the release pipeline is the &#8220;code coverage&#8221; report. Although you can find several posts about the intricacies of code coverage for PowerShell (my favourite is this ...]]></description>
								<content:encoded><![CDATA[<p>A recent addition to the release pipeline is the &#8220;code coverage&#8221; report. Although you can find several posts about the intricacies of code coverage for PowerShell (my favourite is <a href="https://www.sapien.com/blog/2016/06/24/testing-pester-code-coverage/">this post by June Blender</a>), you may be asking yourself what is code coverage in simple terms.</p>
<h2>defining code coverage</h2>
<blockquote><p>Coupled with tests, code coverage is a metric that measures how much of the code is tested.</p></blockquote>
<p>This is helpful to realize the test written is really covering for all the &#8220;features&#8221; of the code. A function with a test is a good thing. A function with a test that covers the 10% of the lines definitely helps, but tells you that a lot of the code involved may not be failproof.</p>
<p>While reaching 100% is not entirely possible due to Powershell limitations, it should be the goal for everyone. The more code coverage we reach:</p>
<ul>
<li>the more stable the module.</li>
<li>the more &#8220;situations&#8221; are being checked and handled correctly</li>
<li>the more tests will be complete, documenting what to expect from the function</li>
<li>the more documentation about how a function needs to behave, the more users can fiddle with the code and add features being sure they don&#8217;t break anything in the process</li>
</ul>
<p>We run a suite of tests at each commit via <a href="https://appveyor.com">appveyor</a>. The service we chose for code coverage is <a href="https://codecov.io">codecov</a>. We chose them mostly due to the fact that their support is great and we needed their exclusive feature of &#8220;merge report&#8221; because we run different test suites for each build (even some C# code). Also, its interface is as good as a code coverage report can be, you can see the full source code and line-by-line coverage.</p>
<h2>dbatools coverage</h2>
<p>For public consumption, <a href="https://codecov.io/gh/sqlcollaborative/dbatools/branch/development">our development branch</a> shows the most current coverage report for the whole project.</p>
<p>Now that the project is open about coverage metrics, you can contribute to the project writing more complete tests for all functions which are not 100% covered.</p>
<p>Let‚Äôs see a practical example.</p>
<p>A few days ago, on 2017-11-13, the development branch showed Get-DbaDbRecoveryModel.ps1 with a <a href="https://codecov.io/gh/sqlcollaborative/dbatools/tree/6870dccda543988eb952f574de9f758134ee85d5/functions">90% coverage</a>. Codecov‚Äôs urls are prettier but for the sake of this blogpost, which must point to specific commits, they‚Äôll be lengthy and ugly.</p>
<figure id="attachment_6560" aria-describedby="caption-attachment-6560" style="width: 800px" class="wp-caption alignnone"><img class="wp-image-6560 size-large" src="https://dbatools.io/wp-content/uploads/2017/11/blogpost_improving_tests_1.png?resize=800%2C130&#038;ssl=1" alt="" width="800" height="130" srcset="https://dbatools.io/wp-content/uploads/2017/11/blogpost_improving_tests_1.png?resize=1024%2C166&amp;ssl=1 1024w, https://dbatools.io/wp-content/uploads/2017/11/blogpost_improving_tests_1.png?resize=300%2C49&amp;ssl=1 300w, https://dbatools.io/wp-content/uploads/2017/11/blogpost_improving_tests_1.png?resize=768%2C125&amp;ssl=1 768w, https://dbatools.io/wp-content/uploads/2017/11/blogpost_improving_tests_1.png?w=1799&amp;ssl=1 1799w, https://dbatools.io/wp-content/uploads/2017/11/blogpost_improving_tests_1.png?w=1600&amp;ssl=1 1600w" sizes="(max-width: 800px) 100vw, 800px" data-recalc-dims="1" /><figcaption id="caption-attachment-6560" class="wp-caption-text">original coverage</figcaption></figure>
<p>Clicking on the <a href="https://codecov.io/gh/sqlcollaborative/dbatools/src/6870dccda543988eb952f574de9f758134ee85d5/functions/Set-DbaDbRecoveryModel.ps1">function itself</a>, you can see that only one line is specifically not covered</p>
<figure id="attachment_6561" aria-describedby="caption-attachment-6561" style="width: 800px" class="wp-caption alignnone"><img class="wp-image-6561 size-large" src="https://dbatools.io/wp-content/uploads/2017/11/blogpost_improving_tests_2.png?resize=800%2C127&#038;ssl=1" alt="" width="800" height="127" srcset="https://dbatools.io/wp-content/uploads/2017/11/blogpost_improving_tests_2.png?resize=1024%2C162&amp;ssl=1 1024w, https://dbatools.io/wp-content/uploads/2017/11/blogpost_improving_tests_2.png?resize=300%2C48&amp;ssl=1 300w, https://dbatools.io/wp-content/uploads/2017/11/blogpost_improving_tests_2.png?resize=768%2C122&amp;ssl=1 768w, https://dbatools.io/wp-content/uploads/2017/11/blogpost_improving_tests_2.png?w=1716&amp;ssl=1 1716w, https://dbatools.io/wp-content/uploads/2017/11/blogpost_improving_tests_2.png?w=1600&amp;ssl=1 1600w" sizes="(max-width: 800px) 100vw, 800px" data-recalc-dims="1" /><figcaption id="caption-attachment-6561" class="wp-caption-text">original coverage &#8211; source details</figcaption></figure>
<p>Line 87 basically is about the possibility to specify a specific recovery model as a filter to retrieve only matching databases.</p>
<p>If you run <strong>Get-Help Get-DbaDbRecoveryModel</strong> you‚Äôll see this parameter</p>
<pre class="lang:ps decode:true ">-RecoveryModel &lt;String[]&gt;
¬†¬†¬†¬†¬†¬†¬† Filters the output based on Recovery Model. Valid options are Simple, Full and BulkLogged
¬†¬†¬†¬†¬†¬†¬† Details about the recovery models can be found here:
¬†¬†¬†¬†¬†¬†¬† https://docs.microsoft.com/en-us/sql/relational-databases/backup-restore/recovery-models-sql-server

</pre>
<p>If you inspect the <a href="https://github.com/dataplat/dbatools/blob/6870dcc/tests/Get-DbaDbRecoveryModel.Tests.ps1">relevant test</a>¬†you‚Äôll see there is nothing relative to that specific parameter.</p>
<p>Unfortunately, this means that if someone makes a modification to the function in the future, there won‚Äôt be any assurance that parameter continues to work as expected. We want to extend that test to include that too, so that the behaviour will always be the same.</p>
<h2>giving more coverage</h2>
<p>First, we need to create a database to test against the new case. Remembering that <em>dbatoolsci_</em> is the default prefix for any resource created, let‚Äôs go with <em>dbatoolsci_getrecoverymodel</em>.</p>
<p>Cannibalizing a recurrent pattern seen in most tests, let‚Äôs add a new Context with a BeforeAll and an AfterAll stanzas to keep everything clean</p>
<pre class="lang:ps decode:true">Context "RecoveryModel parameter works" {
    BeforeAll {
        $server = Connect-DbaInstance -SqlInstance $script:instance2
        $dbname = "dbatoolsci_getrecoverymodel"
        Get-DbaDatabase -SqlInstance $server -Database $dbname | Remove-DbaDatabase -Confirm:$false
        $server.Query("CREATE DATABASE $dbname; ALTER DATABASE $dbname SET RECOVERY BULK_LOGGED WITH NO_WAIT;")
    }
    AfterAll {
        Get-DbaDatabase -SqlInstance $script:instance2 -Database $dbname | Remove-DbaDatabase -Confirm:$false
    }
}</pre>
<p>Summing up, <em>BeforeAll</em> runs before ANY test within the upper-level stanza (in our case, the brand new <em>Context</em>), while <em>AfterAll</em> runs after, no matter the results (keeping things clean is a priority, so cleanup needs to run no matter what)</p>
<p>You‚Äôll see the <em>BeforeAll</em> checks and removes any preexisting <em>dbatoolsci_getrecoverymodel</em> database, it then proceeds to create a new one with BULK_LOGGED. The <em>AfterAll</em> instead just removes the database we created. Then, we create the real test case:</p>
<pre class="lang:ps decode:true ">It "gets the newly created database with the correct recovery model" {
    $results = Get-DbaDbRecoveryModel -SqlInstance $script:instance2 -Database $dbname
    $results.RecoveryModel -eq 'BulkLogged' | Should Be $true
}
It "honors the RecoveryModel parameter filter" {
    $results = Get-DbaDbRecoveryModel -SqlInstance $script:instance2 -RecoveryModel BulkLogged
    $results.Name -contains $dbname | Should Be $true
}
</pre>
<p>Now, let‚Äôs run the test locally, before submitting our changes. Create a <strong>C:\Temp\constants.ps1</strong> or a <strong>.\tests\local.constants.ps1</strong> that points to a live instance (in my case, the simplest of them all, <em>localhost</em>, results in this)</p>
<pre class="lang:ps decode:true">PS C:\dbatools-dev\tests&gt; get-content .\constants.local.ps1
$script:instance1 = "localhost"
$script:instance2 = "localhost"
$script:instance1_detailed = "localhost,1433"
$script:appveyorlabrepo = "C:\github\appveyor-lab"
$instances = @($script:instance1, $script:instance2)
$ssisserver = "localhost"</pre>
<p>Then, let‚Äôs launch the test</p>
<pre class="lang:ps decode:true">.\manual.pester.ps1 -path .\Get-DbaDbRecoveryModel.Tests.ps1 -TestIntegration</pre>
<p><center><img class="wp-image-6562 size-full" src="https://dbatools.io/wp-content/uploads/2017/11/blogpost_improving_tests_3.png?resize=755%2C262&#038;ssl=1" alt="" width="755" height="262" srcset="https://dbatools.io/wp-content/uploads/2017/11/blogpost_improving_tests_3.png?w=755&amp;ssl=1 755w, https://dbatools.io/wp-content/uploads/2017/11/blogpost_improving_tests_3.png?resize=300%2C104&amp;ssl=1 300w" sizes="(max-width: 755px) 100vw, 755px" data-recalc-dims="1" /><em>manual test run</em></center></p>
<h2>merging to the dbatools repository</h2>
<p>Now that we&#8217;ve confirmed that everything checks out, let‚Äôs create the pull request (PR).</p>
<p>First, we open a proper feature branch spawned from development</p>
<pre class="lang:ps decode:true ">git checkout development
git checkout -b tests/Get-DbaRecoveryModel</pre>
<p>add the relevant commits, then push the new branch</p>
<pre class="lang:ps decode:true ">git push origin tests/Get-DbaRecoveryModel</pre>
<p>wait a few seconds, go on github and create the PR</p>
<p><center><img class="wp-image-6563 size-large" src="https://dbatools.io/wp-content/uploads/2017/11/blogpost_improving_tests_4.png?resize=800%2C145&#038;ssl=1" alt="" width="800" height="145" srcset="https://dbatools.io/wp-content/uploads/2017/11/blogpost_improving_tests_4.png?resize=1024%2C186&amp;ssl=1 1024w, https://dbatools.io/wp-content/uploads/2017/11/blogpost_improving_tests_4.png?resize=300%2C55&amp;ssl=1 300w, https://dbatools.io/wp-content/uploads/2017/11/blogpost_improving_tests_4.png?resize=768%2C140&amp;ssl=1 768w, https://dbatools.io/wp-content/uploads/2017/11/blogpost_improving_tests_4.png?w=1304&amp;ssl=1 1304w" sizes="(max-width: 800px) 100vw, 800px" data-recalc-dims="1" /> <em>open a PR</em></center></p>
<p>change the base branch to development</p>
<p><center><img class="wp-image-6564 size-full" src="https://dbatools.io/wp-content/uploads/2017/11/blogpost_improving_tests_5.png?resize=753%2C232&#038;ssl=1" alt="" width="753" height="232" srcset="https://dbatools.io/wp-content/uploads/2017/11/blogpost_improving_tests_5.png?w=753&amp;ssl=1 753w, https://dbatools.io/wp-content/uploads/2017/11/blogpost_improving_tests_5.png?resize=300%2C92&amp;ssl=1 300w" sizes="(max-width: 753px) 100vw, 753px" data-recalc-dims="1" /> <em>change base branch</em></center></p>
<p>Once you filled out the details, you‚Äôll have written something like <a href="https://github.com/dataplat/dbatools/pull/2646">this PR</a></p>
<p>Now, we just wait for the build to complete (impatient ones, watch <a href="/ci">appveyor&#8217;s dbatools &#8220;homepage&#8221;</a>¬†to monitor the status in real-time)</p>
<h2>inspecting the results</h2>
<p>Once the build has done, the list of recent opened PRs on codecov is at <a href="https://codecov.io/gh/sqlcollaborative/dbatools/pulls">dbatools.io/coverage</a></p>
<p>If you inspect the one I created with this blogpost, which is <a href="https://codecov.io/gh/sqlcollaborative/dbatools/pull/2646">#2646</a>¬†, when you browse to the <a href="https://codecov.io/gh/sqlcollaborative/dbatools/pull/2646/tree/functions">functions folder</a>¬†to see what happened with the coverage of Get-DbaRecoveryModel.ps1 ‚Ä¶ voil√†</p>
<p><center><img class="wp-image-6565 size-large" src="https://dbatools.io/wp-content/uploads/2017/11/blogpost_improving_tests_6.png?resize=800%2C129&#038;ssl=1" alt="" width="800" height="129" srcset="https://dbatools.io/wp-content/uploads/2017/11/blogpost_improving_tests_6.png?resize=1024%2C165&amp;ssl=1 1024w, https://dbatools.io/wp-content/uploads/2017/11/blogpost_improving_tests_6.png?resize=300%2C48&amp;ssl=1 300w, https://dbatools.io/wp-content/uploads/2017/11/blogpost_improving_tests_6.png?resize=768%2C124&amp;ssl=1 768w, https://dbatools.io/wp-content/uploads/2017/11/blogpost_improving_tests_6.png?w=1814&amp;ssl=1 1814w, https://dbatools.io/wp-content/uploads/2017/11/blogpost_improving_tests_6.png?w=1600&amp;ssl=1 1600w" sizes="(max-width: 800px) 100vw, 800px" data-recalc-dims="1" /><em>coverage increase</em></center></p>
<p>You can click further to see the <a href="https://codecov.io/gh/sqlcollaborative/dbatools/src/be3a3d976f1393a688bd2a437e452ab9c7d399f5/functions/Get-DbaDbRecoveryModel.ps1">details</a>: you can see that the line which wasn‚Äôt covered is now green.</p>
<p><center><img class="wp-image-6566 size-large" src="https://dbatools.io/wp-content/uploads/2017/11/blogpost_improving_tests_7.png?resize=800%2C98&#038;ssl=1" alt="" width="800" height="98" srcset="https://dbatools.io/wp-content/uploads/2017/11/blogpost_improving_tests_7.png?resize=1024%2C125&amp;ssl=1 1024w, https://dbatools.io/wp-content/uploads/2017/11/blogpost_improving_tests_7.png?resize=300%2C37&amp;ssl=1 300w, https://dbatools.io/wp-content/uploads/2017/11/blogpost_improving_tests_7.png?resize=768%2C94&amp;ssl=1 768w, https://dbatools.io/wp-content/uploads/2017/11/blogpost_improving_tests_7.png?w=1494&amp;ssl=1 1494w" sizes="(max-width: 800px) 100vw, 800px" data-recalc-dims="1" /><em>coverage increase line by line</em></center></p>
<p>Enjoyed this post? Come join the Pester-lovers on <a href="/slack">Slack‚Äôs</a> #dbatools-pester to improve current tests!</p>
<p>Ciao!<br />
Simone <img src="https://s.w.org/images/core/emoji/12.0.0-1/72x72/1f1ee-1f1f9.png" alt="üáÆüáπ" class="wp-smiley" style="height: 1em; max-height: 1em;" /></p>
]]></content:encoded>
							<wfw:commentRss>https://dbatools.io/improving-tests/feed/</wfw:commentRss>
		<slash:comments>0</slash:comments>
						<post-id xmlns="com-wordpress:feed-additions:1">6559</post-id>	</item>
		<item>
		<title>introducing the community-driven build reference</title>
		<link>https://dbatools.io/buildref/</link>
				<comments>https://dbatools.io/buildref/#comments</comments>
				<pubDate>Mon, 16 Oct 2017 14:26:26 +0000</pubDate>
		<dc:creator><![CDATA[Simone Bizzotto]]></dc:creator>
				<category><![CDATA[articles]]></category>
		<category><![CDATA[party]]></category>

		<guid isPermaLink="false">https://dbatools.io/?p=6442</guid>
				<description><![CDATA[Yet another post from the dbatools team, I&#8217;m Simone Bizzotto. Hit me up on Slack, I&#8217;m @niphlod. the problem Even the accidental DBA has to manage those pesky SQL Server ...]]></description>
								<content:encoded><![CDATA[<p>Yet another post from the dbatools team, I&#8217;m Simone Bizzotto. Hit me up on <a href="/slack">Slack</a>, I&#8217;m @niphlod.</p>
<h2>the problem</h2>
<p>Even the accidental DBA has to manage those pesky SQL Server Updates. Be it a bug fix, a security fix, a &#8220;new features&#8221; release, well&#8230; it needs to be installed.</p>
<ul>
<li>Put auditor in the mix: <em>what build are you on ?</em></li>
<li>Put your bosses&#8217; boss in the mix: <em>is the farm still officially supported by MS ?</em></li>
<li>Put a developer in the mix: <em>do we have that bug fixed, or that shiny new feature ?</em></li>
<li>Put every DBA in the mix: we manage a fleet of SQL Servers and we want them to be updated regularly, with all of the versions on par of what it has been carefully tested on a non-production instance.</li>
</ul>
<p>A quick search on google sends you &#8211; probably &#8211; to the most famous &#8220;build list&#8221; : <a href="https://sqlserverbuilds.blogspot.com/">sqlserverbuilds.blogspot.com</a><br />
If you&#8217;re managing other MS product, you&#8217;d have this bookmarked already :¬†<a href="https://buildnumbers.wordpress.com/">buildnumbers.wordpress.com</a></p>
<p>If you&#8217;re subscribed to sqlservercentral (and you haven&#8217;t missed the post), you know about¬† <a href="http://sqlbuilds.ekelmans.com/">sqlbuilds.ekelmans.com</a><br />
If you follow Brent Ozar, you&#8217;ll know about <a href="https://sqlserverupdates.com/">sqlserverupdates.com</a><br />
If you&#8217;re a technet addict, you&#8217;ll end up on <a href="https://technet.microsoft.com/library/ff803383">technet.microsoft.com/library/ff803383</a></p>
<p>If someone comes up with &#8220;<em>are you still on an officially supported version?</em>&#8221; question, you&#8217;ll go on to search <a href="https://support.microsoft.com/en-us/lifecycle/search?alpha=sql%20server">support.microsoft.com/lifecycle/search?alpha=sql+server</a>.</p>
<p>And I&#8217;m totally sure I&#8217;m missing a few.</p>
<p>All of the above sites/lists are maintained by a different set of people (kudos to everyone), who helped DBAs, but all for different &#8220;angles&#8221;; every time you need a complete set of information, you need to go on more than one of those lists. And every time you need to get what version your instance is, well, you need to go fetch it.</p>
<h2>the solutions</h2>
<p>Enter the JSON-based dbatools commmand, <a href="https://docs.dbatools.io/Get-DbaBuildReference/">Get-DbaBuildReference</a>, and accompanying <a href="/builds">build website</a>! Back in March, dbatools released a shiny new command, which will save you a lot of time in the &#8220;inventory&#8221; part of the deal.</p>
<h3>the command</h3>
<p><a href="https://dbatools.io/wp-content/uploads/2017/10/img_59e2103a5fd37-full.png?ssl=1"><img class="alignnone size-full wp-image-6447 aligncenter" src="https://dbatools.io/wp-content/uploads/2017/10/img_59e2103a5fd37.png?w=800&#038;ssl=1" alt="" srcset="https://dbatools.io/wp-content/uploads/2017/10/img_59e2103a5fd37.png?w=700&amp;ssl=1 700w, https://dbatools.io/wp-content/uploads/2017/10/img_59e2103a5fd37.png?resize=300%2C91&amp;ssl=1 300w" sizes="(max-width: 700px) 100vw, 700px" data-recalc-dims="1" /></a></p>
<p>You get back on a jiffy:<br />
&#8211; the Build<br />
&#8211; the Major Release<br />
&#8211; the Service Pack<br />
&#8211; the Cumulative Update<br />
&#8211; the KB related to that version<br />
&#8211; when the support for that version ends<br />
&#8211; if all of the above are matching a verified build<br />
&#8211; if a warning is shown, you passed a bad build or the JSON must be updated</p>
<p>How can <strong>it</strong> do <strong>that</strong>? We needed to compose yet another source of information, coming from all of the information we could get our hands on.</p>
<p>It&#8217;s been a crafty work, but we just couldn&#8217;t fetch that info programmatically while being sure it was correct (or speedy). If you dabble in Powershell, you can execute the following and note an -Update switch.</p>
<blockquote><p>
  Get-Help Get-DbaBuildReference
</p></blockquote>
<p>If you are more curious , you can check out the <a href="https://github.com/dataplat/dbatools/blob/master/functions/Get-DbaBuildReference.ps1">source</a>.</p>
<p>You&#8217;ll see that information comes from a json file, which is shipped with the module, and that the <em>-Update</em> switch fetches a publicly available json file from <a href="https://sqlcollaborative.github.io/assets/dbatools-buildref-index.json">https://sqlcollaborative.github.io/assets/dbatools-buildref-index.json</a>.</p>
<h3>omg the website</h3>
<p>Our PowerShell command is easy to use but some just won&#8217;t dabble in Powershell. For everyone&#8217;s delight (hopefully), we crafted a page that builds a nice table containing all the build information, and <strong>it</strong> just does <strong>that</strong> based on that json file. So the same JSON file that powers Get-DbaBuildReference is being used to power this super easy to use site.</p>
<p>Hell, you can even fetch the <a href="https://github.com/dataplat/sqlcollaborative.github.io/blob/master/builds.html">source</a>¬†and host it yourself.</p>
<p>Need the info? Bookmark <a href="https://dbatools.io/builds">dbatools.io/builds</a>, hit it, enter your build number in the search box and have all the info back. I&#8217;m not a fast clicker and had this done in less than 2 seconds.</p>
<p><img class="aligncenter size-large wp-image-6457" src="https://dbatools.io/wp-content/uploads/2017/10/build.gif?resize=800%2C450&#038;ssl=1" alt="" width="800" height="450" data-recalc-dims="1" /></p>
<p>Are you a spreadsheet fan?¬†Presto! Press on &#8220;Copy&#8221; or &#8220;Excel&#8221; and lookup (or VLOOKUP) all the way.</p>
<h2>open source means even faster updates</h2>
<p>The website, the command and the json are all publicly available and editable. The website is hosted on gh-pages, and dbatools is on GitHub.</p>
<p>Moreover, dbatools welcome any type of contributors, even casual ones (there&#8217;s more than 900 people in Slack). This means that anyone, even drive-by contributors, can help keep the build reference updated. If you know of a missing build, you can hit us up on <a href="/slack">Slack</a>, <a href="/twitter">Twitter</a>, open a GitHub <a href="/issues">issue</a>, send a mail, send pigeons&#8230; The index will be updated, and everyone will benefit.</p>
<p>Join us, help every other person tracking builds effectively!</p>
<p>Ciao!<br />
Simone <img src="https://s.w.org/images/core/emoji/12.0.0-1/72x72/1f1ee-1f1f9.png" alt="üáÆüáπ" class="wp-smiley" style="height: 1em; max-height: 1em;" /></p>
]]></content:encoded>
							<wfw:commentRss>https://dbatools.io/buildref/feed/</wfw:commentRss>
		<slash:comments>2</slash:comments>
						<post-id xmlns="com-wordpress:feed-additions:1">6442</post-id>	</item>
	</channel>
</rss>
